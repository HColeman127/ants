{"version":3,"sources":["webpack:///./src/ant.ts","webpack:///./src/draw.ts","webpack:///./src/map.ts","webpack:///./src/types.ts","webpack:///./src/utils.ts","webpack:///./src/vector2D.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAA8B;AAEF;AAG5B;IAuCI,aAAY,GAAS,EAAE,GAAS;QALzB,aAAQ,GAAY,KAAK,CAAC;QAC1B,YAAO,GAAW,CAAC,CAAC;QACnB,eAAU,GAAW,CAAC,CAAC;QAI3B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;IAC3B,CAAC;IAxCc,gBAAY,GAA3B;QACI,IAAI,GAAG,GAAG,EAAE,CAAC;QAEb,KAAK,IAAI,CAAC,GAAG,GAAqB,EAAE,CAAC,MAAwB,EAAE,CAAC,EAAE,EAAE;YAChE,KAAK,IAAI,CAAC,GAAG,GAAqB,EAAE,CAAC,MAAwB,EAAE,CAAC,EAAE,EAAE;gBAChE,IAAI,UAAC,EAAE,CAAC,IAAG,UAAC,EAAE,CAAC,KAAI,aAAsB,CAAC;oBAAE,GAAG,CAAC,IAAI,CAAC,IAAI,8CAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;aACxE;SACJ;QAED,GAAG,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAf,CAAe,CAAC,CAAC;QACpC,IAAI,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC;QAEtB,IAAI,EAAE,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QAC7B,IAAI,EAAE,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QAC7B,IAAI,EAAE,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;QAE/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;YAC3B,IAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAClB,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACb,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACb,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,MAAmB,CAAC;SAC1C;QAED,OAAO,EAAC,GAAG,OAAE,IAAI,QAAE,EAAE,MAAE,EAAE,MAAE,EAAE,MAAC,CAAC;IACnC,CAAC;IAkBM,wBAAU,GAAjB,UAAkB,MAAyB;QACvC,IAAM,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;QAEnD,IAAI,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;YAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QAEtG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,uDAAa,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC;QAExE,IAAM,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAElE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,UAAU,EAAE,CAAC;IACxD,CAAC;IAiDO,gCAAkB,GAA1B,UAA2B,MAAyB;QAChD,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAClC,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAElC,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,IAAI,KAAK,GAAG,EAAE,CAAC;QAEf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE;YACpC,IAAM,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAM,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAE9B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAmB,EAAE;gBAChC,IAAM,KAAK,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,MAAmB,CAAC,CAAC;gBAC/C,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC,EAAE;oBACrB,SAAS,GAAG,KAAK,CAAC;oBAClB,KAAK,GAAG,CAAC,CAAC;oBACV,KAAK,GAAG,CAAC,CAAC;iBACb;aACJ;SACJ;QAED,OAAO,IAAI,8CAAI,CAAC,KAAK,GAAG,EAAE,EAAE,KAAK,GAAG,EAAE,CAAC,CAAC;IAC5C,CAAC;IAEM,wBAAU,GAAjB,UAAkB,UAAsB;QACpC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEtC,IAAI,OAAO,CAAC,CAAC,GAAG,EAAE,IAAI,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YAClC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,OAAO,MAAqB,CAAC;SACrC;QAGD,IAAI,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,MAAmB,OAAO,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,MAAoB,OAAO,CAAC,CAAC,EAAE;YACjG,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,OAAO;SACV;QAGD,IAAM,WAAW,GAAG,OAAO,CAAC,KAAK,EAAE,CAAC;QACpC,IAAI,UAAU,CAAC,oDAAc,CAAC,WAAW,CAAC,CAAC,MAAkB,EAAE;YAC3D,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,OAAO;SACV;aAAM,IAAI,UAAU,CAAC,oDAAc,CAAC,WAAW,CAAC,CAAC,MAAkB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACpF,UAAU,CAAC,oDAAc,CAAC,WAAW,CAAC,CAAC,IAAgB,CAAC;YACxD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,OAAO,MAAqB,CAAC;YAClC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1C;QAED,IAAI,CAAC,GAAG,GAAG,IAAI,8CAAI,CAAC,iDAAW,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,MAAmB,EAAE,iDAAW,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,MAAoB,CAAC,CAAC;QAC/G,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;IACxB,CAAC;IAEO,oBAAM,GAAd;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpC,IAAI,CAAC,WAAW,GAAG,oDAAU,CAAC;QAC9B,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,IAAI,CAAC,UAAU,GAAG,GAAG,EAAE;YACvB,IAAI,CAAC,GAAG,GAAG,IAAI,8CAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;SAC/B;IACL,CAAC;IAEM,yBAAW,GAAlB,UAAmB,MAAyB;QACxC,IAAM,KAAK,GAAG,oDAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACvC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;IACtE,CAAC;IAEM,2BAAa,GAApB;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,QAAuB,CAAC,CAAC;IACpE,CAAC;IA9KsB,QAAI,GAAa,GAAG,CAAC,YAAY,EAAE,CAAC;IA+K/D,UAAC;CAAA;iEAhLoB,GAAG;;;;;;;;;;;;;;;;;ACDI;AAG5B;IAOI,oBAAY,UAAkB;QAC1B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAsB,CAAC;QACvE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,GAAG,GAAG,IAAI,SAAS,UAAoC,CAAC;QAC7D,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,EAAE,IAAgB,CAAC;QAE1C,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAED,yCAAoB,GAApB;QACI,IAAI,CAAC,MAAM,CAAC,KAAK,MAAmB,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,MAAM,MAAoB,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAC,KAAiB,IAAK,YAAK,CAAC,cAAc,EAAE,EAAtB,CAAsB,CAAC,CAAC;QAC3F,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,KAAiB,IAAK,YAAK,CAAC,cAAc,EAAE,EAAtB,CAAsB,CAAC,CAAC;IACzF,CAAC;IAED,kCAAa,GAAb;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAA0B,EAAE,CAAC,IAAE,CAAC,EAAE;YAC/C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;SAC1B;IACL,CAAC;IAED,mCAAc,GAAd;QAAA,iBAIC;QAHG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,KAAiB;YACpD,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,iDAAW,CAAC,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,+CAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;QACzF,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iCAAY,GAAZ,UAAa,GAAQ;QACjB,IAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;QAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAkB,EAAE,CAAC,EAAE,EAAE;YACtC,IAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAEhB,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,MAAkB,EAAE;gBACrC,IAAI,CAAC,CAAC,CAAC,GAAO,GAAG,CAAC;gBAClB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;gBAClB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;aACrB;iBAAM,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,MAAkB,EAAE;gBAC5C,IAAI,CAAC,CAAC,CAAC,GAAO,CAAC,CAAC;gBAChB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAChB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;aACrB;iBAAM;gBACH,IAAI,CAAC,CAAC,CAAC,GAAO,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBAChB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aACjC;SACJ;QAED,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEtC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IACpC,CAAC;IAED,8BAAS,GAAT,UAAU,IAAW;QACjB,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;QACjC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QAErB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,OAAqB,EAAE,CAAC,EAAE,EAAE;YACzC,IAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;YACtB,IAAM,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAEtC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;SAC3C;QAED,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IACtB,CAAC;IAED,+BAAU,GAAV,UAAW,GAAS;QAChB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,MAAkB;YAAE,OAAO;QAElD,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;QACjC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,GAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC5D,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;QAElB,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;QAC/B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,GAAG,EAAC,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,MAAM,EAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,MAAoB,EAAE,CAAC,CAAC;IACtH,CAAC;IACL,iBAAC;AAAD,CAAC;;AAED;IAII,eAAY,IAAY,EAAE,QAAkB;QACxC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAEO,8BAAc,GAAtB;QAAA,iBAkBC;QAjBG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,QAAQ,IAAgB,EAA7B,CAA6B,CAAC,CAAC;QACtG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,QAAQ,IAAgB,EAA7B,CAA6B,CAAC,CAAC;QACtG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,QAAQ,IAAgB,EAA7B,CAA6B,CAAC,CAAC;QAEtG,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,KAAoB;YACpD,QAAQ,KAAK,CAAC,GAAG,EAAE;gBACf,KAAK,GAAG;oBACJ,KAAI,CAAC,QAAQ,IAAgB,CAAC;oBAC9B,MAAM;gBACV,KAAK,GAAG;oBACJ,KAAI,CAAC,QAAQ,IAAgB,CAAC;oBAC9B,MAAM;gBACV,KAAK,GAAG;oBACJ,KAAI,CAAC,QAAQ,IAAgB,CAAC;oBAC9B,MAAM;aACb;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IACL,YAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;AChI6B;AAEF;AACJ;AAGxB;IAMI;QACI,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,OAAqB,EAAE,CAAC,EAAE,EAAE;YACzC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,yCAAG,CAAC,IAAI,8CAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,uDAAa,EAAE,CAAC,CAAC,CAAC;SAC9D;QAED,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAiB,QAAiB,CAAC;QACvD,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAiB,QAAiB,CAAC;QAEvD,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,QAAiB,CAAC;IACtD,CAAC;IAED,kCAAa,GAAb;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAkB,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,EAAE;gBAC7E,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBACrB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;aACxB;SACJ;IACL,CAAC;IAED,gCAAW,GAAX;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,OAAqB,EAAE,CAAC,EAAE,EAAE;YACzC,IAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAIzB,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7D,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAChC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC9D,GAAG,CAAC,aAAa,EAAE,CAAC;SACvB;IACL,CAAC;IAGD,gCAAW,GAAX,UAAY,GAAS,EAAE,MAAc,EAAE,KAAa;QAApD,iBAOC;QANG,+DAAyB,CAAC,GAAG,EAAE,MAAM,EAAE,UAAC,CAAS,EAAE,CAAS;YACxD,IAAM,KAAK,GAAG,CAAC,GAAG,CAAC,MAAmB,CAAC;YACvC,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;YAC/B,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACzB,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACP,CAAC;IACL,iBAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;ACvD6B;AAgB9B;IAOI,mBAAY,OAAoB;QAC5B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAEvB,IAAI,CAAC,GAAG,GAAG,oDAAU,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAE3B,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAEO,iCAAa,GAArB;QAAA,iBAeC;QAdG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAC,KAAiB;YACzD,KAAI,CAAC,YAAY,KAAjB,KAAI,CAAC,YAAY,GAAM,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YAC3C,KAAI,CAAC,aAAa,KAAlB,KAAI,CAAC,aAAa,GAAM,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QAChD,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAC,KAAiB;YACnD,IAAM,IAAI,GAAG,KAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC;YAClD,KAAI,CAAC,GAAG,GAAG,IAAI,8CAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;QAC7E,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,KAAiB;YACjD,KAAI,CAAC,YAAY,KAAjB,KAAI,CAAC,YAAY,GAAK,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,EAAC;YAC5C,KAAI,CAAC,aAAa,KAAlB,KAAI,CAAC,aAAa,GAAK,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,EAAC;QACjD,CAAC,CAAC,CAAC;IACP,CAAC;IACL,gBAAC;AAAD,CAAC;;;;;;;;;;;;;;;;AC9CD;IAAA;IAsCA,CAAC;IAhCU,cAAQ,GAAf,UAAgB,GAAS;QACrB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,MAAmB,CAAC;IACpE,CAAC;IAEM,WAAK,GAAZ,UAAa,GAAW,EAAE,GAAW,EAAE,GAAW;QAC9C,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;IAC7C,CAAC;IAEM,SAAG,GAAV,UAAW,GAAW;QAClB,IAAI,GAAG,GAAG,CAAC;YAAE,OAAO,CAAC,CAAC;QACtB,IAAI,GAAG,GAAG,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC;QACvB,OAAO,CAAC,CAAC;IACb,CAAC;IAMM,yBAAmB,GAA1B,UAA2B,GAAS,EAAE,MAAc,EAAE,EAAkC;QACpF,IAAM,aAAa,GAAG,eAAM,EAAE,CAAC,EAAC;QAChC,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAC3C,CAAC,GAAI,IAAI,CAAC,GAAG,MAAoB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAC5D,CAAC,EAAE,EAAE;YACV,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAC3C,CAAC,GAAG,IAAI,CAAC,GAAG,MAAmB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,EAC1D,CAAC,EAAE,EAAE;gBACV,IAAI,UAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAG,UAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAG,aAAa,EAAE;oBACjD,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBACZ;aACJ;SACJ;IACL,CAAC;IACL,YAAC;AAAD,CAAC;;;;;;;;;;;;;;;;ACzCD;IAWI,cAAY,CAAS,EAAE,CAAS;QAC5B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;IACf,CAAC;IAID,sBAAI,sBAAI;aAAR;YACI,OAAO,IAAI,CAAC,IAAI,CAAC,aAAI,CAAC,CAAC,EAAE,CAAC,IAAG,aAAI,CAAC,CAAC,EAAE,CAAC,EAAC,CAAC;QAC5C,CAAC;;;OAAA;IAED,sBAAI,4BAAU;aAAd;YACI,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,aAAI,CAAC,CAAC,EAAE,CAAC,IAAG,aAAI,CAAC,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC;QAC7D,CAAC;;;OAAA;IAiCD,qBAAM,GAAN,UAAO,MAAc;QACjB,OAAO,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IACtD,CAAC;IAED,wBAAS,GAAT,UAAU,MAAc;QACpB,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,aAAI,CAAC,CAAC,EAAE,CAAC,IAAG,aAAI,CAAC,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC;IAClE,CAAC;IAED,oBAAK,GAAL;QACI,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IAMD,yBAAU,GAAV,UAAW,GAAe;QAAf,6BAAe;QACtB,IAAM,QAAQ,GAAW,aAAI,CAAC,CAAC,EAAE,CAAC,IAAG,aAAI,CAAC,CAAC,EAAE,CAAC,EAAC;QAC/C,OAAO,CAAC,QAAQ,IAAI,YAAG,EAAE,CAAC,EAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAChF,CAAC;IAgBD,mBAAI,GAAJ,UAAK,CAAO;QACR,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,oBAAK,GAAL,UAAM,CAAO;QACT,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAChD,CAAC;IAED,kBAAG,GAAH,UAAI,CAAO;QACP,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,CAAC;IAkBM,aAAQ,GAAf,UAAgB,MAAkB;QAAlB,mCAAkB;QAC9B,OAAO,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;IACxF,CAAC;IAxHe,UAAK,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACvB,SAAI,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtB,OAAE,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACpB,OAAE,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IA0HxC,WAAC;CAAA;iEA/HoB,IAAI;;;;;;;UCAzB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;ACN+B;AACa;AACZ;AAGhC,IAAI,EAAe,CAAC;AACpB,IAAI,GAAe,CAAC;AACpB,IAAI,EAAc,CAAC;AACnB,IAAI,KAAgB,CAAC;AAIrB,IAAI,MAAM,GAAW,CAAC,CAAC;AACvB,IAAI,eAAe,GAAW,CAAC,CAAC;AAIhC,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;IAC5B,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IACnC,GAAG,GAAG,IAAI,yCAAU,EAAE,CAAC;IACvB,EAAE,GAAG,IAAI,0CAAU,CAAC,QAAQ,CAAC,CAAC;IAC9B,KAAK,GAAG,IAAI,6CAAS,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IAEjC,oBAAoB,EAAE,CAAC;IAEvB,IAAI,EAAE,CAAC;AACX,CAAC,CAAC,CAAC;AAEH,SAAS,oBAAoB;IACzB,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAM,sBAAe,EAAE,EAAjB,CAAiB,CAAC,CAAC;IAC1F,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,cAAM,sBAAe,GAAG,CAAC,EAAnB,CAAmB,CAAC,CAAC;AACjG,CAAC;AAID,SAAS,IAAI;IACT,IAAM,EAAE,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;IAE7B,YAAY,EAAE,CAAC;IACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,EAAE,CAAC,EAAE,EAAE;QACtC,GAAG,CAAC,aAAa,EAAE,CAAC;QACpB,GAAG,CAAC,WAAW,EAAE,CAAC;KACrB;IACD,UAAU,EAAE,CAAC;IAEb,QAAQ,CAAC,EAAE,CAAC,CAAC;IAEb,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;AACvC,CAAC;AAED,SAAS,QAAQ,CAAC,EAAU;IACxB,IAAM,EAAE,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;IAEpC,MAAM,GAAG,IAAI,GAAC,MAAM,GAAG,IAAI,GAAC,EAAE,CAAC;IAC/B,EAAE,CAAC,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAC5C,CAAC;AAED,SAAS,UAAU;IACf,EAAE,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;IACrB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACvB,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC7B,CAAC;AAED,SAAS,YAAY;IACjB,IAAI,EAAE,CAAC,KAAK,CAAC,QAAQ,MAAkB;QAAE,OAAO;IAEhD,IAAI,KAAK,CAAC,YAAY,EAAE;QACpB,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC/D,OAAO;KACV;IAED,IAAI,KAAK,CAAC,aAAa;QAAE,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAC5E,CAAC","file":"bundle.js","sourcesContent":["import Vec2 from './vector2D';\r\nimport {Params} from './params';\r\nimport Utils from './utils';\r\nimport {Material, ViewData} from './types';\r\n\r\nexport default class Ant {\r\n    public static readonly view: ViewData = Ant.compute_view();\r\n    \r\n    private static compute_view(): ViewData {\r\n        let pts = [];\r\n\r\n        for (let x = -Params.VIEW_DISTANCE; x <= Params.VIEW_DISTANCE; x++) {\r\n            for (let y = -Params.VIEW_DISTANCE; y <= Params.VIEW_DISTANCE; y++) {\r\n                if (x**2 + y**2 <= Params.VIEW_DISTANCE**2) pts.push(new Vec2(x, y));\r\n            }\r\n        }\r\n    \r\n        pts.sort((a, b) => a.norm - b.norm);\r\n        let size = pts.length;\r\n    \r\n        let dx = new Int8Array(size);\r\n        let dy = new Int8Array(size);\r\n        let di = new Uint32Array(size);\r\n    \r\n        for (let i = 0; i < size; i++) {\r\n            const dv = pts[i];\r\n            dx[i] = dv.x;\r\n            dy[i] = dv.y;\r\n            di[i] = dv.x + dv.y * Params.MAP_WIDTH;    \r\n        }\r\n\r\n        return {pts, size, dx, dy, di};\r\n    }\r\n\r\n    // instance stuff\r\n    public pos: Vec2;\r\n    public aim: Vec2;\r\n    private desired_aim: Vec2;\r\n\r\n    public has_food: boolean = false;\r\n    public potency: number = 0;\r\n    private wall_count: number = 0;\r\n\r\n\r\n    constructor(pos: Vec2, aim: Vec2) {\r\n        this.pos = pos;\r\n        this.aim = aim;\r\n        this.desired_aim = aim;\r\n    }\r\n    \r\n    public update_aim(marker: Uint8ClampedArray) {\r\n        const max_desire = this.find_max_in_circle(marker);\r\n\r\n        if (max_desire.dot(this.aim) > 0) this.desired_aim = this.desired_aim.plus(max_desire.with_norm(0.1));\r\n\r\n        this.desired_aim = this.desired_aim.plus(Vec2.rand_vec(0.1)).normalized;\r\n\r\n        const acceleration = this.desired_aim.minus(this.aim).scaled(0.5);\r\n\r\n        this.aim = this.aim.plus(acceleration).clamp_norm();\r\n    }\r\n\r\n    /* private find_max_in_square(): Vec2 {\r\n        const marker = this.has_food ? marker_A : marker_B;\r\n\r\n        const x0 = trunc(this.pos.x);\r\n        const y0 = trunc(this.pos.y);\r\n\r\n        let max_value = 0;\r\n        let max_x = x0;\r\n        let max_y = x0;\r\n\r\n        for (let y = Math.max(0, y0 - Params.VIEW_DISTANCE);\r\n                 y <  Math.min(Params.MAP_HEIGHT, y0 + Params.VIEW_DISTANCE);\r\n                 y++) {\r\n            for (let x = Math.max(0, x0 - Params.VIEW_DISTANCE);\r\n                     x < Math.min(Params.MAP_WIDTH, x0 + Params.VIEW_DISTANCE);\r\n                     x++) {\r\n                const value = marker[x + y * Params.MAP_WIDTH];\r\n                if (value > max_value) {\r\n                    max_value = value;\r\n                    max_x = x;\r\n                    max_y = y;\r\n                }\r\n            }\r\n        }\r\n\r\n        //if (max_x === this.pos.x && max_y === this.pos.y) return Vec2.ZERO;\r\n\r\n        //console.log(x0, y0);\r\n        //console.log(max_x - x0, max_y - y0);\r\n\r\n        return new Vec2(max_x - x0, max_y - y0);\r\n\r\n        // if (max_value === 0) {\r\n        //     this.aim = this.aim.plus(Vec2.random(0.1)).clamp_unit();\r\n        //     return;\r\n        // }\r\n\r\n        // const adjust = new Vec2(max_x - x0, max_y - y0);\r\n\r\n        // if (this.aim.dot(adjust) <= 0) {\r\n        //     this.aim = this.aim.plus(Vec2.random(0.1)).clamp_unit();\r\n        //     return;\r\n        // }\r\n\r\n        // this.aim = this.aim.plus(adjust.normalized()).clamp_unit();\r\n    } */\r\n\r\n    private find_max_in_circle(marker: Uint8ClampedArray): Vec2 {\r\n        const x0 = Math.trunc(this.pos.x);\r\n        const y0 = Math.trunc(this.pos.y);\r\n\r\n        let max_value = 0;\r\n        let max_x = x0;\r\n        let max_y = y0;\r\n\r\n        for (let i = 0; i < Ant.view.size; i++) {\r\n            const x = x0 + Ant.view.dx[i];\r\n            const y = y0 + Ant.view.dy[i];\r\n\r\n            if (0 <= x && x < Params.MAP_WIDTH) {\r\n                const value = marker[x + y * Params.MAP_WIDTH];\r\n                if ((value > max_value)) {\r\n                    max_value = value;\r\n                    max_x = x;\r\n                    max_y = y;\r\n                }\r\n            }\r\n        }\r\n\r\n        return new Vec2(max_x - x0, max_y - y0);\r\n    }\r\n\r\n    public update_pos(structures: Uint8Array) {\r\n        let new_pos = this.pos.plus(this.aim);\r\n\r\n        if (new_pos.x < 50 && new_pos.y < 50) {\r\n            this.has_food = false;\r\n            this.potency = Params.MAX_POTENCY;\r\n        }\r\n\r\n        // hit edges\r\n        if (new_pos.x < 0 || Params.MAP_WIDTH < new_pos.x || new_pos.y < 0 || Params.MAP_HEIGHT < new_pos.y) {\r\n            this.bounce();\r\n            return;\r\n        } \r\n\r\n        // hit wall\r\n        const new_pos_int = new_pos.trunc();\r\n        if (structures[Utils.index_of(new_pos_int)] === Material.wall) {\r\n            this.bounce();\r\n            return;\r\n        } else if (structures[Utils.index_of(new_pos_int)] === Material.food && !this.has_food) {\r\n            structures[Utils.index_of(new_pos_int)] = Material.none;\r\n            this.has_food = true;\r\n            this.potency = Params.MAX_POTENCY;\r\n            this.desired_aim = this.aim.scaled(-1);\r\n        }\r\n\r\n        this.pos = new Vec2(Utils.clamp(new_pos.x, 0, Params.MAP_WIDTH), Utils.clamp(new_pos.y, 0, Params.MAP_HEIGHT));\r\n        this.wall_count = 0;\r\n    }\r\n\r\n    private bounce() {\r\n        this.pos = this.pos.minus(this.aim);\r\n        this.desired_aim = Vec2.ZEROS;\r\n        this.wall_count++;\r\n        if (this.wall_count > 100) {\r\n            this.pos = new Vec2(20, 20);\r\n        }\r\n    }\r\n\r\n    public drop_marker(marker: Uint8ClampedArray) {\r\n        const index = Utils.index_of(this.pos);\r\n        marker[index] = Math.max(marker[index], Math.trunc(this.potency));\r\n    }\r\n\r\n    public decay_potency() {\r\n        this.potency = Math.max(0, this.potency - Params.POTENCY_DECAY);\r\n    }\r\n}","import Ant from './ant';\r\nimport Map from './map';\r\nimport {Params} from './params';\r\nimport {Material} from './types';\r\nimport Utils from './utils';\r\nimport Vec2 from './vector2D';\r\n\r\nexport default class DrawHelper {\r\n    readonly canvas: HTMLCanvasElement;\r\n    readonly ctx: CanvasRenderingContext2D;\r\n    public img: ImageData;\r\n\r\n    public brush: Brush;\r\n\r\n    constructor(element_id: string) {\r\n        this.canvas = document.getElementById(element_id) as HTMLCanvasElement;\r\n        this.ctx = this.canvas.getContext('2d');\r\n        this.img = new ImageData(Params.MAP_WIDTH, Params.MAP_WIDTH);\r\n        this.brush = new Brush(30, Material.none);\r\n\r\n        this.init_canvas_settings();\r\n        this.init_img_data();\r\n        this.init_listeners();\r\n    }\r\n\r\n    init_canvas_settings() {\r\n        this.canvas.width = Params.MAP_WIDTH;\r\n        this.canvas.height = Params.MAP_HEIGHT;\r\n        this.canvas.addEventListener('contextmenu', (event: WheelEvent) => event.preventDefault());\r\n        this.canvas.addEventListener('wheel', (event: WheelEvent) => event.preventDefault());\r\n    }\r\n\r\n    init_img_data() {\r\n        for (let i = 3; i < Params.IMAGE_ARRAY_SIZE; i+=4) {\r\n            this.img.data[i] = 255;\r\n        }\r\n    }\r\n\r\n    init_listeners() {\r\n        this.canvas.addEventListener('wheel', (event: WheelEvent) => {\r\n            this.brush.radius = Utils.clamp(this.brush.radius - Utils.sgn(event.deltaY), 0, 100);\r\n        });\r\n    }\r\n\r\n    draw_markers(map: Map) {\r\n        const data = this.img.data;\r\n        for (let i = 0; i < Params.MAP_AREA; i++) {\r\n            const j = 4 * i;\r\n    \r\n            if (map.structures[i] === Material.wall) {\r\n                data[j]     = 100;\r\n                data[j + 1] = 100;\r\n                data[j + 2] = 100;\r\n            } else if (map.structures[i] === Material.food) {\r\n                data[j]     = 0;\r\n                data[j + 1] = 0;\r\n                data[j + 2] = 255;\r\n            } else {\r\n                data[j]     = map.marker_A[i];\r\n                data[j + 1] = 0;\r\n                data[j + 2] = map.marker_B[i];\r\n            }\r\n        }\r\n        \r\n        this.ctx.putImageData(this.img, 0, 0);\r\n    \r\n        this.ctx.fillStyle = '#ff0000';\r\n        this.ctx.fillRect(0, 0, 50, 50);\r\n    }\r\n\r\n    draw_ants(ants: Ant[]) {\r\n        this.ctx.strokeStyle = '#ffffff';\r\n        this.ctx.beginPath();\r\n    \r\n        for (let i = 0; i < Params.COLONY_SIZE; i++) {\r\n            const p = ants[i].pos;\r\n            const dp = ants[i].aim.with_norm(1.5);\r\n    \r\n            this.ctx.moveTo(p.x - dp.x, p.y - dp.y);\r\n            this.ctx.lineTo(p.x + dp.x, p.y + dp.y);\r\n        }\r\n    \r\n        this.ctx.stroke();\r\n    }\r\n    \r\n    draw_brush(pos: Vec2) {\r\n        if (this.brush.material === Material.none) return;\r\n        \r\n        this.ctx.strokeStyle = '#999999';\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(pos.x, pos.y, this.brush.radius, 0, 2*Math.PI);\r\n        this.ctx.stroke();\r\n\r\n        this.ctx.fillStyle = '#ffffff';\r\n        this.ctx.fillText('brush: ' + {0: 'none', 1: 'wall', 2: 'food'}[this.brush.material], 10, Params.MAP_HEIGHT - 10);\r\n    }\r\n}\r\n\r\nexport class Brush {\r\n    public radius: number;\r\n    public material: Material;\r\n\r\n    constructor(size: number, material: Material) {\r\n        this.radius = size;\r\n        this.material = material;\r\n\r\n        this.init_listeners();\r\n    }\r\n\r\n    private init_listeners() {\r\n        document.getElementById('button_none').addEventListener('click', () => this.material = Material.none);\r\n        document.getElementById('button_wall').addEventListener('click', () => this.material = Material.wall);\r\n        document.getElementById('button_food').addEventListener('click', () => this.material = Material.food);\r\n\r\n        window.addEventListener('keydown', (event: KeyboardEvent) => {\r\n            switch (event.key) {\r\n                case '0':\r\n                    this.material = Material.none;\r\n                    break;\r\n                case '1':\r\n                    this.material = Material.wall;\r\n                    break;\r\n                case '2':\r\n                    this.material = Material.food;\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n}","import Vec2 from './vector2D';\r\nimport {Params} from './params';\r\nimport Utils from './utils';\r\nimport Ant from './ant';\r\n\r\n\r\nexport default class Simulation {\r\n    public ants: Ant[];\r\n    public marker_A: Uint8ClampedArray;\r\n    public marker_B: Uint8ClampedArray;\r\n    public structures: Uint8Array;\r\n\r\n    constructor() {\r\n        this.ants = [];\r\n        for (let i = 0; i < Params.COLONY_SIZE; i++) {\r\n            this.ants.push(new Ant(new Vec2(25, 25), Vec2.rand_vec()));\r\n        }\r\n\r\n        this.marker_A = new Uint8ClampedArray(Params.MAP_AREA);\r\n        this.marker_B = new Uint8ClampedArray(Params.MAP_AREA);\r\n\r\n        this.structures = new Uint8Array(Params.MAP_AREA);\r\n    }\r\n\r\n    decay_markers() {\r\n        for (let i = 0; i < Params.MAP_AREA; i++) {\r\n            if ((this.marker_A[i] !== 0 || this.marker_B[i] !== 0) && Math.random() < 0.005) {\r\n                this.marker_A[i] = 0;\r\n                this.marker_B[i] = 0;\r\n            }\r\n        }\r\n    }\r\n    \r\n    update_ants() {\r\n        for (let i = 0; i < Params.COLONY_SIZE; i++) {\r\n            const ant = this.ants[i];\r\n\r\n\r\n\r\n            ant.update_aim(ant.has_food ? this.marker_A : this.marker_B);\r\n            ant.update_pos(this.structures);\r\n            ant.drop_marker(ant.has_food ? this.marker_B : this.marker_A);\r\n            ant.decay_potency();\r\n        }\r\n    }\r\n\r\n\r\n    apply_brush(pos: Vec2, radius: number, value: number) {\r\n        Utils.loop_clamped_circle(pos, radius, (x: number, y: number) => {\r\n            const index = x + y * Params.MAP_WIDTH;\r\n            this.structures[index] = value;\r\n            this.marker_A[index] = 0;\r\n            this.marker_B[index] = 0;\r\n        });\r\n    }\r\n}","import Vec2 from './vector2D';\r\n\r\nexport type ViewData = {\r\n    pts: Vec2[],\r\n    size: number,\r\n    dx: Int8Array,\r\n    dy: Int8Array,\r\n    di: Uint32Array;\r\n} \r\n\r\nexport const enum Material {\r\n    none = 0,\r\n    wall = 1,\r\n    food = 2\r\n}\r\n\r\nexport class MouseData {\r\n    private element: HTMLElement;\r\n\r\n    public pos: Vec2;\r\n    public is_left_down: boolean;\r\n    public is_right_down: boolean;\r\n\r\n    constructor(element: HTMLElement) {\r\n        this.element = element;\r\n\r\n        this.pos = Vec2.ZEROS;\r\n        this.is_left_down = false;\r\n        this.is_right_down = false;\r\n\r\n        this.add_listeners();\r\n    }\r\n\r\n    private add_listeners() {\r\n        this.element.addEventListener('mousedown', (event: MouseEvent) => {\r\n            this.is_left_down ||= (event.button === 0);\r\n            this.is_right_down ||= (event.button === 2);\r\n        });\r\n    \r\n        window.addEventListener('mousemove', (event: MouseEvent) => {\r\n            const rect = this.element.getBoundingClientRect();\r\n            this.pos = new Vec2(event.clientX - rect.left, event.clientY - rect.top);\r\n        });\r\n    \r\n        window.addEventListener('mouseup', (event: MouseEvent) => {\r\n            this.is_left_down &&= !(event.button === 0);\r\n            this.is_right_down &&= !(event.button === 2);\r\n        });\r\n    }\r\n}","import Vec2 from './vector2D';\r\nimport {Params} from './params';\r\n\r\nexport default class Utils {\r\n    /* static get_mouse_pos(event: MouseEvent, element: HTMLElement): Vec2 {\r\n        const rect = element.getBoundingClientRect();\r\n        return new Vec2(event.clientX - rect.left, event.clientY - rect.top);\r\n    } */\r\n\r\n    static index_of(pos: Vec2): number {\r\n        return Math.trunc(pos.x) + Math.trunc(pos.y) * Params.MAP_WIDTH;\r\n    }\r\n    \r\n    static clamp(num: number, min: number, max: number): number {\r\n        return Math.max(min, Math.min(max, num));\r\n    }\r\n\r\n    static sgn(num: number): number {\r\n        if (num > 0) return 1;\r\n        if (num < 0) return -1;\r\n        return 0;\r\n    }\r\n    \r\n    /* static rand(scale: number = 1): number {\r\n        return scale * 2 * (Math.random() - 0.5);\r\n    } */\r\n    \r\n    static loop_clamped_circle(pos: Vec2, radius: number, fn: (x: number, y: number) => void) {\r\n        const square_radius = radius**2;\r\n        for (let y = Math.max(0, Math.trunc(pos.y) - radius);\r\n                 y <  Math.min(Params.MAP_HEIGHT, Math.trunc(pos.y) + radius);\r\n                 y++) {\r\n            for (let x = Math.max(0, Math.trunc(pos.x) - radius);\r\n                     x < Math.min(Params.MAP_WIDTH, Math.trunc(pos.x) + radius);\r\n                     x++) {\r\n                if ((pos.x - x)**2 + (pos.y - y)**2 < square_radius) {\r\n                    fn(x, y);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","export default class Vec2 {\r\n    // static fields\r\n    static readonly ZEROS = new Vec2(0, 0);\r\n    static readonly ONES = new Vec2(1, 1);\r\n    static readonly Ex = new Vec2(1, 0);\r\n    static readonly Ey = new Vec2(0, 1);\r\n\r\n    // instance fields\r\n    readonly x: number;\r\n    readonly y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    // computed properties\r\n\r\n    get norm(): number {\r\n        return Math.sqrt(this.x**2 + this.y**2);\r\n    }\r\n    \r\n    get normalized(): Vec2 {\r\n        return this.scaled(1 / Math.sqrt(this.x**2 + this.y**2));\r\n    }\r\n\r\n    /* get negated(): Vec2 {\r\n        return new Vec2(-this.x, -this.y);\r\n    } */\r\n\r\n    /* get arg(): number {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n\r\n    get angle2pi(): number {\r\n        const ang = this.arg;\r\n        return (ang >= 0 ? ang : 2*Math.PI + ang);\r\n    } */\r\n\r\n    /* get is_zero(): boolean {\r\n        return (this.x === 0 && this.y === 0);\r\n    } */\r\n\r\n    // instance methods\r\n\r\n    // unary operators\r\n\r\n    /* copy(): Vec2 {\r\n        return new Vec2(this.x, this.y);\r\n    } */\r\n\r\n    /* apply(fn: (x: number) => number): Vec2 {\r\n        return new Vec2(fn(this.x), fn(this.y));\r\n    } */\r\n\r\n    \r\n\r\n    scaled(scalar: number): Vec2 {\r\n        return new Vec2(scalar * this.x, scalar * this.y);\r\n    }\r\n\r\n    with_norm(scalar: number): Vec2 {\r\n        return this.scaled(scalar / Math.sqrt(this.x**2 + this.y**2));\r\n    }\r\n\r\n    trunc(): Vec2 {\r\n        return new Vec2(Math.trunc(this.x), Math.trunc(this.y));\r\n    }\r\n    \r\n    /* sqr_norm(): number {\r\n        return this.x**2 + this.y**2;\r\n    } */\r\n\r\n    clamp_norm(max: number = 1): Vec2 {\r\n        const sqr_norm: number = this.x**2 + this.y**2;\r\n        return (sqr_norm <= max**2) ? this : this.scaled(max / Math.sqrt(sqr_norm));\r\n    }\r\n\r\n    /* orth(): Vec2 {\r\n        return new Vec2(-this.y, this.x);\r\n    } */\r\n\r\n    /* nudge(scalar: number = 1): Vec2 {\r\n        return this.plus(Vec2.rand_vec(scalar));\r\n    } */\r\n\r\n    // binary operators\r\n\r\n    /* equals(v: Vec2): boolean {\r\n        return (this.x === v.x && this.y === v.y);\r\n    } */\r\n\r\n    plus(v: Vec2): Vec2 {\r\n        return new Vec2(this.x + v.x, this.y + v.y);\r\n    }\r\n\r\n    minus(v: Vec2): Vec2 {\r\n        return new Vec2(this.x - v.x, this.y - v.y);\r\n    }\r\n\r\n    dot(v: Vec2): number {\r\n        return (this.x * v.x) + (this.y * v.y);\r\n    }\r\n\r\n    /* cross(v: Vec2): number {\r\n        return (this.x * v.y) - (this.y * v.x);\r\n    } */\r\n\r\n    /* sqr_dist(v: Vec2): number {\r\n        return (this.x - v.x)**2 + (this.y - v.y)**2;\r\n    } */\r\n\r\n    /* dist(v: Vec2): number {\r\n        return Math.sqrt((this.x - v.x)**2 + (this.y - v.y)**2);\r\n    } */\r\n    \r\n    \r\n\r\n    // static methods\r\n\r\n    static rand_vec(scalar: number = 1): Vec2 {\r\n        return new Vec2(scalar * (2 * Math.random() - 1), scalar * (2 * Math.random() - 1));\r\n    }\r\n\r\n    /* static polar(r: number, theta: number): Vec2 {\r\n        return new Vec2(r * Math.cos(theta), r * Math.sin(theta));\r\n    } */\r\n}\r\n\r\n\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Simulation from './map';\r\nimport {Material, MouseData} from './types';\r\nimport DrawHelper from './draw';\r\n\r\n\r\nlet p1: HTMLElement;\r\nlet sim: Simulation;\r\nlet dh: DrawHelper;\r\nlet mouse: MouseData;\r\n\r\n\r\n// uhhh stuff?\r\nlet avg_dt: number = 0;\r\nlet iters_per_frame: number = 0;\r\n\r\n\r\n\r\nwindow.addEventListener('load', () => {\r\n    p1 = document.getElementById('p1');\r\n    sim = new Simulation();\r\n    dh = new DrawHelper('canvas');\r\n    mouse = new MouseData(dh.canvas);\r\n\r\n    add_button_listeners();\r\n\r\n    step();\r\n});\r\n\r\nfunction add_button_listeners() {\r\n    document.getElementById('button_play').addEventListener('click', () => iters_per_frame++);\r\n    document.getElementById('button_pause').addEventListener('click', () => iters_per_frame = 0);\r\n}\r\n\r\n\r\n\r\nfunction step() {\r\n    const t0 = performance.now();\r\n\r\n    handle_brush();\r\n    for (let i = 0; i < iters_per_frame; i++) {\r\n        sim.decay_markers();\r\n        sim.update_ants();\r\n    }\r\n    draw_frame();\r\n\r\n    log_time(t0);\r\n\r\n    window.requestAnimationFrame(step);\r\n}\r\n\r\nfunction log_time(t0: number) {\r\n    const dt = (performance.now() - t0);\r\n\r\n    avg_dt = 0.95*avg_dt + 0.05*dt;\r\n    p1.innerHTML = avg_dt.toFixed(2) + 'ms';\r\n}\r\n\r\nfunction draw_frame() {\r\n    dh.draw_markers(sim);\r\n    dh.draw_ants(sim.ants);\r\n    dh.draw_brush(mouse.pos);\r\n}\r\n\r\nfunction handle_brush() {\r\n    if (dh.brush.material === Material.none) return;\r\n\r\n    if (mouse.is_left_down) {\r\n        sim.apply_brush(mouse.pos, dh.brush.radius, dh.brush.material);\r\n        return;\r\n    }\r\n    \r\n    if (mouse.is_right_down) sim.apply_brush(mouse.pos, dh.brush.radius, 0);\r\n}\r\n"],"sourceRoot":""}